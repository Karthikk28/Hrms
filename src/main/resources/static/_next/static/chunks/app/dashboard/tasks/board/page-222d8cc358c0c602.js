(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3119],{83551:function(e,t,a){Promise.resolve().then(a.bind(a,44726))},44726:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(57437),l=a(2265),r=a(38472),c=a(54817),n=a(92513),d=a(63550),i=a(47390),o=a(42365),u=a(40933),x=a(74697),m=a(87138),p=a(75010),h=a(45348);let j="http://localhost:8081/api",g=[{id:"TODO",label:"To Do"},{id:"IN_PROGRESS",label:"In Progress"},{id:"IN_REVIEW",label:"In Review"},{id:"DONE",label:"Completed"}],b=e=>{switch(e){case"CRITICAL":return"bg-rose-500/10 text-rose-400 border-rose-500/20";case"HIGH":return"bg-orange-500/10 text-orange-400 border-orange-500/20";case"MEDIUM":return"bg-cyan-500/10 text-cyan-400 border-cyan-500/20";case"LOW":return"bg-slate-500/10 text-slate-400 border-slate-500/20"}},N=e=>{switch(e){case"TODO":return"bg-slate-400";case"IN_PROGRESS":return"bg-blue-500";case"IN_REVIEW":return"bg-amber-500";case"DONE":return"bg-emerald-500"}},f=e=>{if(!e)return"No Due Date";let[t,a,s]=e.split("-").map(Number),l=new Date(t,a-1,s),r=new Date;r.setHours(0,0,0,0),l.setHours(0,0,0,0);let c=(l.getTime()-r.getTime())/864e5;return 0===c?"Today":1===c?"Tomorrow":-1===c?"Yesterday":l.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})};function v(){let[e,t]=(0,l.useState)([]),[a,v]=(0,l.useState)(""),[y,w]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[D,k]=(0,l.useState)([]),[E,I]=(0,l.useState)([]),[P,Z]=(0,l.useState)(0);(0,l.useRef)(null);let[O,R]=(0,l.useState)([]),[T,M]=(0,l.useState)([]),[_,z]=(0,l.useState)([]),[A,L]=(0,l.useState)([]),[B,F]=(0,l.useState)(!1),[H,U]=(0,l.useState)(""),[W,G]=(0,l.useState)(""),[V,Y]=(0,l.useState)(""),[q,Q]=(0,l.useState)(""),[X,J]=(0,l.useState)(""),[K,$]=(0,l.useState)(null),[ee,et]=(0,l.useState)("MEMBER"),[ea,es]=(0,l.useState)(""),el=new Date().toISOString().split("T")[0];(0,l.useEffect)(()=>{er(),ec(),en()},[]);let er=async()=>{let[e,a]=await Promise.all([r.Z.get("".concat(j,"/tasks")),r.Z.get("".concat(j,"/projects"))]),s={};a.data.forEach(e=>s[e.id]=e.name),t(await Promise.all(e.data.map(async e=>{let[t,a]=await Promise.all([r.Z.get("".concat(j,"/task-comments/").concat(e.id)).catch(()=>({data:[]})),r.Z.get("".concat(j,"/task-attachments/").concat(e.id)).catch(()=>({data:[]}))]);return{id:e.id,title:e.title,project:s[e.projectId],priority:e.priority,status:e.status,dueDate:f(e.dueDate),comments:t.data.length,attachments:a.data.length}})))},ec=async()=>{try{let e=await r.Z.get("".concat(j,"/projects"));z(e.data)}catch(e){console.log("Failed to load projects")}},en=async()=>{try{let e=await r.Z.get("".concat(j,"/employees"));L(e.data)}catch(e){console.log("Failed to load employees")}};(0,l.useEffect)(()=>{y&&(async()=>{let[e,t,a,s,l]=await Promise.all([r.Z.get("".concat(j,"/tasks/").concat(y)),r.Z.get("".concat(j,"/task-assignees/").concat(y,"/details")),r.Z.get("".concat(j,"/task-comments/").concat(y)),r.Z.get("".concat(j,"/task-attachments/").concat(y)),r.Z.get("".concat(j,"/projects"))]),c={};l.data.forEach(e=>c[e.id]=e.name),C({id:e.data.id,title:e.data.title,description:e.data.description||"No description provided.",project:c[e.data.projectId],priority:e.data.priority,status:e.data.status,dueDate:f(e.data.dueDate)}),k(t.data),I(a.data),M(s.data),Z(s.data.length)})()},[y]);let ed=()=>{w(null),C(null),R([])},ei=async()=>{if(!X||!q||!W)return alert("Please fill required fields");try{await r.Z.post("".concat(j,"/projects"),{name:X,description:H,managerId:Number(q),startDate:W,endDate:V||null,status:"ACTIVE"}),alert("Project Created Successfully"),J(""),U(""),G(""),Y(""),Q(""),F(!1),ec()}catch(t){var e;console.error(null===(e=t.response)||void 0===e?void 0:e.data),alert("Failed to create project")}},eo=async()=>{if(!K||!ea||!ee)return alert("Please select project, employee and role");try{await r.Z.post("".concat(j,"/project-members"),{projectId:K,employeeId:Number(ea),role:ee}),alert("Member Added Successfully"),es(""),et("")}catch(e){alert("Failed to add member")}},eu=async e=>{if(S)try{await r.Z.put("".concat(j,"/tasks/").concat(S.id,"/status"),{status:e}),C({...S,status:e}),t(t=>t.map(t=>t.id===S.id?{...t,status:e}:t))}catch(e){alert("Failed to update status")}};return(0,s.jsxs)("div",{className:"h-[calc(100vh-2rem)] flex flex-col pt-2 text-white overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 px-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-black bg-gradient-to-r from-violet-500 to-fuchsia-500 bg-clip-text text-transparent",children:"Workflow Board"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),(0,s.jsx)("input",{placeholder:"Search tasks...",value:a,onChange:e=>v(e.target.value),className:"bg-slate-900 border border-slate-700 pl-10 pr-4 py-2 rounded-xl w-64"})]}),(0,s.jsx)(m.default,{href:"/dashboard/tasks/create",className:"px-4 py-2 bg-violet-600 rounded-xl font-bold",children:"+ New Task"}),(0,s.jsx)("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-cyan-600 rounded-xl font-bold",children:"+ New Project"})]})]}),B&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#1B2435] w-full max-w-md    max-h-[90vh] overflow-y-auto   p-6 rounded-2xl space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Create Project"}),(0,s.jsx)("input",{value:X,onChange:e=>J(e.target.value),placeholder:"Project Name",className:"w-full p-2 bg-slate-800 rounded"}),(0,s.jsx)("textarea",{value:H,onChange:e=>U(e.target.value),placeholder:"Project Description",className:"w-full p-2 bg-slate-800 rounded"}),(0,s.jsx)("h1",{children:"Start Date - "}),(0,s.jsx)("input",{type:"date",value:W,min:el,onChange:e=>G(e.target.value),className:"w-full p-2 bg-slate-800 rounded"}),(0,s.jsx)("h1",{children:"End Date - "}),(0,s.jsx)("input",{type:"date",value:V,min:W||el,onChange:e=>Y(e.target.value),className:"w-full p-2 bg-slate-800 rounded"}),(0,s.jsxs)("select",{value:q,onChange:e=>Q(e.target.value),className:"w-full p-2 bg-slate-800 rounded",children:[(0,s.jsx)("option",{value:"",children:"Select Manager"}),A.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]}),(0,s.jsx)("button",{onClick:ei,className:"w-full bg-violet-600 py-2 rounded",children:"Create Project"}),(0,s.jsxs)("select",{value:K||"",onChange:e=>$(Number(e.target.value)),className:"w-full p-2 bg-slate-800 rounded",children:[(0,s.jsx)("option",{value:"",children:"Select Project"}),_.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsxs)("select",{value:ea,onChange:e=>es(e.target.value),className:"w-full p-2 bg-slate-800 rounded",children:[(0,s.jsx)("option",{value:"",children:"Select Employee"}),A.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]}),(0,s.jsxs)("select",{value:ee,onChange:e=>et(e.target.value),className:"w-full p-2 bg-slate-800 rounded",children:[(0,s.jsx)("option",{value:"",children:"Select Role"}),["Developer","Senior Developer","Tester","QA Engineer","UI/UX Designer","DevOps Engineer","Business Analyst","Project Lead","Project Manager"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("button",{onClick:eo,className:"w-full bg-emerald-600 py-2 rounded",children:"Add Member"}),(0,s.jsx)("button",{onClick:()=>F(!1),className:"w-full bg-red-600 py-2 rounded",children:"Close"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-x-auto px-4 pb-4",children:(0,s.jsx)("div",{className:"flex gap-6 min-w-[1200px]",children:g.map(t=>{let l=e.filter(e=>e.status===t.id&&(e.title.toLowerCase().includes(a.toLowerCase())||e.project.toLowerCase().includes(a.toLowerCase())));return(0,s.jsxs)("div",{className:"w-80 rounded-3xl bg-[#0F1623]/50 border border-slate-800",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-slate-800 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-3 h-3 rounded-full ".concat(N(t.id))}),(0,s.jsx)("h3",{className:"font-bold",children:t.label}),(0,s.jsx)("span",{className:"text-xs bg-slate-800 px-2 rounded",children:l.length})]}),(0,s.jsx)(n.Z,{size:16,className:"text-slate-400"})]}),(0,s.jsx)("div",{className:"p-3 space-y-3",children:l.map(e=>(0,s.jsxs)(p.E.div,{layoutId:e.id.toString(),onClick:()=>w(e.id),className:"bg-[#1B2435] hover:bg-[#232D42] p-4 rounded-2xl border border-slate-800 cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-[10px] px-2 py-1 border rounded ".concat(b(e.priority)),children:e.priority}),(0,s.jsx)(d.Z,{size:16})]}),(0,s.jsx)("h4",{className:"font-bold text-sm",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:e.project}),(0,s.jsxs)("div",{className:"flex justify-between mt-3 text-xs text-slate-400",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.Z,{size:12})," ",e.comments,(0,s.jsx)(o.Z,{size:12})," ",e.attachments]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(u.Z,{size:12})," ",e.dueDate]})]})]},e.id))})]},t.id)})})}),(0,s.jsx)(h.M,{children:S&&(0,s.jsx)(p.E.div,{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:ed,children:(0,s.jsxs)(p.E.div,{className:"bg-[#1B2435] rounded-3xl w-full max-w-2xl p-6",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,s.jsxs)("span",{className:"text-[10px] font-bold px-3 py-1 rounded-lg border ".concat(b(S.priority)),children:[S.priority," PRIORITY"]}),(0,s.jsx)(x.Z,{className:"cursor-pointer",onClick:ed})]}),(0,s.jsx)("h2",{className:"text-2xl font-black",children:S.title}),(0,s.jsxs)("p",{className:"text-slate-400 mt-2",children:["• DueDate - ",S.dueDate," • ",S.project]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-xs uppercase text-slate-500 mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-slate-300",children:S.description})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs uppercase text-slate-500 mb-2",children:"Status"}),(0,s.jsx)("select",{value:S.status,onChange:e=>eu(e.target.value),className:"w-full bg-slate-800 p-3 rounded-xl font-bold",children:g.map(e=>(0,s.jsx)("option",{value:e.id,children:e.label},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs uppercase text-slate-500 mb-2",children:"Assignees"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[0===D.length&&(0,s.jsx)("span",{className:"text-sm text-slate-500",children:"Unassigned"}),D.map(e=>(0,s.jsx)("div",{className:"px-3 py-1 bg-cyan-500/10 border border-cyan-500/20 text-cyan-400 text-xs rounded-xl font-medium",children:e.name},e.employeeId))]})]})]}),(0,s.jsxs)("div",{className:"mt-6 border-t border-slate-800 pt-4",children:[(0,s.jsxs)("h3",{className:"text-xs uppercase text-slate-500 mb-3",children:[E.length," Comments"]}),(0,s.jsx)("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:E.map(e=>(0,s.jsxs)("div",{className:"bg-slate-900/50 p-3 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm",children:e.comment}),(0,s.jsxs)("span",{className:"text-xs text-slate-500",children:["EMP",e.userId]})]},e.id))})]}),(0,s.jsxs)("div",{className:"mt-6 border-t border-slate-800 pt-4",children:[(0,s.jsxs)("h3",{className:"text-xs uppercase text-slate-500 mb-3",children:[T.length," Attachments"]}),0===T.length&&(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"No attachments"}),(0,s.jsx)("div",{className:"space-y-2",children:T.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[(0,s.jsx)(o.Z,{size:14}),(0,s.jsx)("span",{children:e.fileName})]},e.id))})]})]})})})]})}}},function(e){e.O(0,[4193,5010,8472,7371,2971,7023,1744],function(){return e(e.s=83551)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7283],{8688:function(e,t,s){Promise.resolve().then(s.bind(s,96243))},95137:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(33480).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},22468:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(33480).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},42365:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.368.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(33480).Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]])},20357:function(e,t,s){"use strict";var r,a;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(88081)},88081:function(e){!function(){var t={229:function(e){var t,s,r,a=e.exports={};function n(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var o=[],c=!1,d=-1;function u(){c&&r&&(c=!1,r.length?o=r.concat(o):d=-1,o.length&&p())}function p(){if(!c){var e=i(u);c=!0;for(var t=o.length;t;){for(r=o,o=[];++d<t;)r&&r[d].run();d=-1,t=o.length}r=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new f(e,t)),1!==o.length||c||i(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function r(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}},l=!0;try{t[e](n,n.exports,r),l=!1}finally{l&&delete s[e]}return n.exports}r.ab="//";var a=r(229);e.exports=a}()},96243:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(57437),a=s(2265),n=s(38472),l=s(95137),i=s(42365),o=s(22468),c=s(87138);let d="http://localhost:8081/api";function u(){let[e,t]=(0,a.useState)([]),[s,u]=(0,a.useState)([]),[p,f]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[x,b]=(0,a.useState)({title:"",description:"",projectId:"",assigneeIds:[],priority:"MEDIUM",dueDate:"",files:[]});(0,a.useEffect)(()=>{n.Z.get("".concat(d,"/projects")).then(e=>t(e.data)).catch(()=>t([]))},[]),(0,a.useEffect)(()=>{if(!x.projectId){u([]),b(e=>({...e,assigneeId:""}));return}n.Z.get("".concat(d,"/project-members/project/").concat(x.projectId,"/details")).then(e=>u(e.data)).catch(()=>u([]))},[x.projectId]);let g=async e=>{e.preventDefault(),f(!0);try{let e=(await n.Z.post("".concat(d,"/tasks"),{title:x.title,description:x.description,projectId:Number(x.projectId),priority:x.priority,dueDate:x.dueDate||null})).data.id;for(let t of x.assigneeIds)await n.Z.post("".concat(d,"/task-assignees"),{taskId:e,employeeId:t});for(let t of x.files){let s=new FormData;s.append("taskId",e.toString()),s.append("file",t),await n.Z.post("".concat(d,"/task-attachments"),s,{headers:{"Content-Type":"multipart/form-data"}})}alert("Task Created Successfully"),window.location.href="/dashboard/tasks/board"}catch(e){alert("Failed to create task")}finally{f(!1)}};return(0,r.jsx)("div",{className:"p-8 text-white min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"w-full max-w-4xl bg-slate-900 border border-slate-800 rounded-3xl p-8 shadow-2xl",children:[(0,r.jsxs)("div",{className:"mb-8 border-b border-slate-800 pb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)(c.default,{href:"/dashboard/tasks/board",className:"p-2 rounded-lg bg-slate-800",children:(0,r.jsx)(l.Z,{size:18})}),(0,r.jsx)("span",{className:"text-sm font-bold text-cyan-500 uppercase",children:"New Assignment"})]}),(0,r.jsx)("h1",{className:"text-3xl font-black",children:"Create Task"})]}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-8",children:[(0,r.jsx)("input",{required:!0,value:x.title,onChange:e=>b({...x,title:e.target.value}),placeholder:"Task Title",className:"w-full bg-transparent border-b-2 border-slate-800 py-4 text-3xl font-bold"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsx)("textarea",{rows:8,value:x.description,onChange:e=>b({...x,description:e.target.value}),placeholder:"Add a detailed description...",className:"w-full bg-slate-950 border border-slate-800 rounded-xl p-4"}),(0,r.jsxs)("label",{className:"block mt-6 border-2 border-dashed border-slate-800 rounded-xl p-6 text-center cursor-pointer",children:[(0,r.jsx)("input",{type:"file",multiple:!0,hidden:!0,onChange:e=>{e.target.files&&b(t=>({...t,files:[...t.files,...Array.from(e.target.files)]}))}}),(0,r.jsx)(i.Z,{className:"mx-auto mb-2"}),"Upload attachments"]}),x.files.length>0&&(0,r.jsx)("div",{className:"mt-3 space-y-2 text-sm text-slate-300",children:x.files.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(i.Z,{size:14}),e.name]},t))})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs uppercase text-slate-500",children:"Project"}),(0,r.jsxs)("select",{value:x.projectId,onChange:e=>b({...x,projectId:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3",children:[(0,r.jsx)("option",{value:"",children:"Select Project"}),e.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("label",{className:"text-xs uppercase text-slate-500",children:"Assignee"}),(0,r.jsx)("button",{type:"button",onClick:()=>m(!h),className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 px-3 text-left text-white",children:0===x.assigneeIds.length?"Unassigned":"".concat(x.assigneeIds.length," selected")}),h&&(0,r.jsx)("div",{className:"absolute z-50 w-full bg-slate-900 border border-slate-800 rounded-xl mt-2 max-h-48 overflow-y-auto shadow-lg",children:s.map(e=>{let t=x.assigneeIds.includes(e.employeeId);return(0,r.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 hover:bg-slate-800 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:t,onChange:()=>{let s=t?x.assigneeIds.filter(t=>t!==e.employeeId):[...x.assigneeIds,e.employeeId];b({...x,assigneeIds:s})},className:"accent-cyan-500"}),(0,r.jsxs)("span",{className:"text-sm",children:[e.employeeName,(0,r.jsxs)("span",{className:"text-xs text-slate-400 ml-1",children:["(",e.role,")"]})]})]},e.employeeId)})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("label",{className:"text-xs uppercase text-slate-500",children:"Due Date"}),(0,r.jsx)("input",{type:"date",value:x.dueDate,min:new Date().toISOString().split("T")[0],onChange:e=>b({...x,dueDate:e.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["LOW","MEDIUM","HIGH","CRITICAL"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>b({...x,priority:e}),className:"py-2 rounded-lg border ".concat(x.priority===e?"bg-cyan-500/20 border-cyan-500 text-cyan-400":"border-slate-800 text-slate-400"),children:e},e))})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-slate-800",children:[(0,r.jsx)(c.default,{href:"/dashboard/tasks/board",children:"Cancel"}),(0,r.jsxs)("button",{disabled:p,className:"px-8 py-3 bg-cyan-600 rounded-xl flex items-center gap-2",children:[(0,r.jsx)(o.Z,{size:18})," Create Task"]})]})]})]})})}}},function(e){e.O(0,[4193,8472,2971,7023,1744],function(){return e(e.s=8688)}),_N_E=e.O()}]);
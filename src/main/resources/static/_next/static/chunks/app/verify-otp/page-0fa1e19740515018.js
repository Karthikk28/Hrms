(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2162],{12390:function(e,t,s){Promise.resolve().then(s.bind(s,67290))},16463:function(e,t,s){"use strict";var a=s(71169);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},67290:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(57437),n=s(2265),r=s(16463);let l="http://localhost:8081";function o(){let e=(0,r.useRouter)(),[t,s]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[c,i]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[f,m]=(0,n.useState)(!1),[p,w]=(0,n.useState)(300),[x,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let t=localStorage.getItem("resetEmail");t?s(t):e.push("/forgot-password")},[e]);let y=(0,r.usePathname)();(0,n.useEffect)(()=>{u(""),i(""),h(""),w(300),g(!1)},[y]),(0,n.useEffect)(()=>{if(p<=0){g(!0);return}let e=setInterval(()=>{w(e=>e-1)},1e3);return()=>clearInterval(e)},[p]);let P=async()=>{if(!o||!c){h("Please enter OTP and new password");return}try{m(!0);let s=await fetch("".concat(l,"/api/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,otp:o,newPassword:c})}),a=await s.text();if(!s.ok)throw Error(a||"Reset failed");h("âœ… Password updated successfully"),localStorage.removeItem("resetEmail"),setTimeout(()=>{e.push("/login")},2e3)}catch(e){e instanceof Error?h(e.message):h("Something went wrong")}finally{m(!1)}},b=async()=>{try{m(!0);let e=await fetch("".concat(l,"/api/auth/resend-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),s=await e.text();if(!e.ok)throw Error(s||"Failed to resend OTP");h("\uD83D\uDCE9 OTP resent successfully"),w(300),g(!1)}catch(e){e instanceof Error?h(e.message):h("Something went wrong")}finally{m(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-darkblue-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-center",children:"Verify OTP"}),(0,a.jsxs)("p",{className:"text-sm text-center text-gray-500",children:["OTP sent to ",t]}),d&&(0,a.jsx)("div",{className:"text-sm text-center text-blue-600",children:d}),(0,a.jsx)("input",{type:"text",placeholder:"Enter OTP",className:"w-full p-3 border rounded-lg",value:o,onChange:e=>u(e.target.value)}),(0,a.jsx)("h1",{children:" OTP is valid upto 5Min "}),(0,a.jsx)("input",{type:"password",placeholder:"New Password",className:"w-full p-3 border rounded-lg",value:c,onChange:e=>i(e.target.value)}),(0,a.jsx)("button",{onClick:P,disabled:f,className:"w-full bg-green-600 text-white py-3 rounded-lg disabled:opacity-50",children:f?"Processing...":"Reset Password"}),(0,a.jsx)("button",{onClick:b,disabled:!x||f,className:"w-full text-blue-600 text-sm mt-2 disabled:opacity-50",children:x?"Resend OTP":"Resend in ".concat(p,"s")})]})})}}},function(e){e.O(0,[2971,7023,1744],function(){return e(e.s=12390)}),_N_E=e.O()}]);